# 全球海缆拓扑可视化系统
[![Vue.js](https://img.shields.io/badge/Vue.js-2.x-blue)](https://vuejs.org/)
[![ECharts](https://img.shields.io/badge/ECharts-5.x-orange)](https://echarts.apache.org/zh/)
[![许可证](https://img.shields.io/badge/许可证-MIT-yellow)](./LICENSE)
[![GitHub Stars](https://img.shields.io/github/stars/your-username/your-repo-name?style=social)](https://github.com/your-username/your-repo-name)

基于 Vue.js + ECharts 构建的海缆运行态势与故障打点一体化可视化系统，支持大屏/紧凑双模式自适应、2D/3D 地球无缝切换、多维度数据筛选、海缆/登陆站关联探索，以及高精度的沿线故障打点与测距能力。

## 📸 效果预览
### 截图展示
![主界面效果](https://placeholder-for-screenshot.png)
> 替换为项目实际截图（推荐分辨率 1920×1080）

### 视频演示
[![视频演示封面](https://placeholder-for-video-thumbnail.png)](https://placeholder-for-video-link.mp4)
> 点击封面查看完整演示视频（支持 MP4/B 站/YouTube 链接）

## ✨ 核心特性
| 能力分类       | 核心功能                                                                 |
|----------------|--------------------------------------------------------------------------|
| 🎨 多模式可视化 | 2D 平面/3D 地球一键切换，支持多套高清纹理（地形/白昼/夜光/8K）；大屏/紧凑模式自适应，布局持久化 |
| 🎯 高精度故障打点 | 仅允许沿海缆走线打点，30/80km 偏移容差校验；实时测距+绿线预览，离线自动回退最近有效打点 |
| 🔍 智能筛选聚焦 | 权益/洲别/里程/状态多维度筛选；海缆/登陆站双向聚焦，故障列表一键定位目标故障段 |
| 🚨 故障全景监控 | 故障列表按严重度排序，支持全量故障叠加形成热力层；故障定位点/涉及登陆站视觉高亮区分 |
| ⚡ 高性能渲染   | 3D 海缆球面插值重构，悬停仅局部样式刷新（避免整图重绘）；后期抗锯齿优化，兼顾性能与观感 |
| 🧩 易扩展适配   | 免登录演示模式，故障数据兜底逻辑；兼容多地图版本，坐标自动转换；小屏/大屏全场景适配 |

## 🚀 快速开始
### 环境准备
- 静态服务环境：Nginx/Apache 或 Python 3.x（本地快速测试）
- 浏览器要求：Chrome/Firefox/Safari 等现代浏览器（支持 ES6+）

### 部署步骤
1. 克隆代码仓库
   ```bash
   git clone https://github.com/your-username/your-repo-name.git
   cd your-repo-name
   ```
2. 部署到 Web 服务
   - Nginx/Apache：将项目放置到服务根目录的 `dp6/` 文件夹下
   - 本地测试：执行以下命令启动简易静态服务
     ```bash
     python -m http.server 8080
     ```
3. 访问系统
   - 服务器部署：`http://<你的服务器IP>/dp6/index.html`
   - 本地测试：`http://localhost:8080/dp6/index.html`
4. 免登录演示模式（跳过生产环境登录校验）
   ```
   http://<你的服务器IP>/dp6/index.html?developmode=1
   ```

## 📖 使用指引
<details>
<summary>🔄 模式切换</summary>

### 布局模式
- 首次加载默认紧凑模式（屏幕宽度 > 3000px 时除外），可通过控制面板手动切换
- 全屏切换：若处于故障聚焦状态，会自动执行「退出聚焦→切换全屏→恢复聚焦」流程，避免地图空白

### 地图模式
- 2D/3D 切换：通过右下角 Speed Dial 控制台一键切换，3D 模式支持纹理切换（地形/夜光等）、自动旋转（速度 0.2~5.0× 可调）
- 地图版本切换：支持亚太中心/标准版（中/英文），切换后故障定位点坐标自动转换并居中焦点
</details>

<details>
<summary>🔍 筛选与聚焦</summary>

### 数据筛选
- 左侧面板（紧凑模式为抽屉式）支持权益类型、洲别、里程、故障状态多维度筛选，提供「只选」快捷操作
- 搜索功能支持拼音、括号匹配，精准定位海缆/登陆站

### 焦点控制
- 点击海缆/登陆站进入聚焦状态，再次点击退出；故障列表点击故障项可直接聚焦目标故障段
- 3D 模式下聚焦会自动计算目标坐标，通过 `globe.viewControl.targetCoord` 居中显示
</details>

<details>
<summary>🎯 故障打点与测距</summary>

1. 进入故障编辑面板，点击「打点」按钮开启打点模式
2. 仅可沿海缆走线悬停/点击打点（起点需为登陆站，30km 容差，80km 兜底）
3. 悬停时实时显示绿线预览、测距结果，离线时自动回退到最近一次有效打点
4. 点击确认后预览状态常驻，可继续打点或保存结果
5. 紧凑模式下打点体验与大屏完全一致，绿线、预览点、测距信息均正常显示
</details>

<details>
<summary>🎨 样式与特效</summary>

- 2D 主题：支持灰阶/墨蓝/极光等 6 套主题，3 套多国配色方案
- 3D 光效：提供标准/柔和/电影等 5 种光效风格，支持亮度调节、后期抗锯齿
- 动画特效：可选海缆流光效果、故障海缆粒子尾迹效果，图例可动态显示/隐藏
</details>

## 🛠 技术栈
| 分层       | 技术选型                                                                 |
|------------|--------------------------------------------------------------------------|
| 前端框架   | Vue.js 2.x、原生 JavaScript (ES6+)                                       |
| 可视化     | ECharts 5.x、ECharts-GL 2.x（3D 地球）                                   |
| UI 组件    | Element UI                                                               |
| 服务端（演示） | Python 3.x（静态服务）、ThinkPHP5.1（接口集成参考）                       |
| 部署       | Nginx/Apache、Docker（可选）                                             |

## 🧠 核心算法（开发者视角）
<details>
<summary>📏 故障打点与测距</summary>

### 核心流程
1. **线路匹配**：从海缆折线段中匹配鼠标坐标最近的合法线段，支持 30km 容差（80km 兜底）
2. **距离计算**：基于 Haversine 公式为边赋权，通过 Dijkstra 算法计算「登陆站起点→打点投影点」的最短沿线距离
3. **3D 优化**：跨太平洋海缆采用球面插值（slerp）重构曲线，默认步距 150km，平衡平滑度与性能
4. **日期变更线处理**：修复 2D 标准地图下跨 180° 经线导致的线段断裂问题
</details>

<details>
<summary>⚡ 性能优化</summary>

- 3D 海缆重算结果缓存，避免重复计算；悬停仅局部刷新样式，不触发整图重绘
- 布局切换/拖拽后执行分时多次重绘，确保地图尺寸与图层渲染正确
- 3D 模式采用适度透明+后期抗锯齿，平衡视觉效果与渲染性能
</details>

## 📜 版本历史
### 重要版本节点
| 版本   | 发布时间   | 核心更新                                                                 |
|--------|------------|--------------------------------------------------------------------------|
| v1.0   | 2025-12-01 | 大屏/紧凑模式响应式布局，布局持久化功能                                   |
| v1.5   | 2025-12-15 | 2D 地图模式完成，基础筛选、聚焦功能上线                                   |
| v2.0   | 2025-12-27 | 故障打点算法上线，支持高精度沿线测距与路径计算                           |
| v2.5   | 2026-01-05 | 3D 地球模式完成，支持纹理切换、故障叠加层、粒子特效                       |
| v3.0   | 2026-01-12 | 海缆数据重算与保存功能，后台布局优化                                     |
| v3.5   | 2026-01-15 | 接入生产信息系统，新增登录验证，完善数据安全管控                         |

### 未来规划
| 版本   | 预计时间   | 规划功能                                                                 |
|--------|------------|--------------------------------------------------------------------------|
| v4.0   | 2026-Q2    | 角色权限管理、操作日志、多用户协作                                       |
| v5.0   | 2026-Q3    | 高分辨率瓦片地图、精细化地理信息展示                                     |
| v6.0   | 2026-Q4    | 整合海陆缆系统全量数据，完善登陆站/海缆详情展示                           |
| v7.0   | 2026-Q4    | 智能故障分析、自然语言交互、自动化故障报告生成                           |

## 🚨 故障排查
<details>
<summary>🔧 常见问题</summary>

1. **布局异常**：检查浏览器是否禁用 localStorage，或是否有第三方脚本覆盖本地存储
2. **打点预览缺失**：确认海缆数据已加载，校验 30/80km 容差配置
3. **3D 纹理加载失败**：检查纹理文件路径，确认浏览器跨域（CORS）配置
4. **IAX 故障分支匹配异常**：对比故障数据与海缆原始几何信息（id/name/feature_id），收集日志排查
</details>

<details>
<summary>🎢 跷跷板问题（A/B 循环）</summary>

### 现象
- A：鼠标移入 3D 海缆走线时，视角频繁回退到亚太中心
- B：「复位视角」「自动旋转」功能在部分场景下失效

### 解决方案
- 增加 `modeSwitching` 锁与双帧 Loading 提示
- 关闭自转时强制回写视角参数，自转迟滞缩短至 0.25s
- 若问题复现，记录操作路径、浏览器版本便于复盘
</details>

## 🤝 贡献指南
1. Fork 本仓库
2. 创建功能分支（`git checkout -b feature/你的功能名`）
3. 提交代码（`git commit -m 'feat: 新增XX功能'`）
4. 推送分支（`git push origin feature/你的功能名`）
5. 提交 Pull Request

### 贡献规范
- 遵循 ES6+ 编码规范，核心逻辑添加注释
- 测试覆盖 2D/3D、大屏/紧凑模式
- 涉及功能变更时同步更新文档

## 📄 许可证
本项目基于 MIT 许可证开源 - 详见 [LICENSE](./LICENSE) 文件。

## ⚠️ 免责声明
1. 本项目仅用于开源学习与演示，生产环境需替换为自有业务数据
2. 演示数据为测试用例，不包含任何企业敏感信息
3. 接口集成示例仅作参考，需根据实际场景调整鉴权与权限逻辑

---

⭐ 如果你觉得本项目有帮助，欢迎点亮 Star！你的支持是项目维护的最大动力。